import{r as l,j as m,q as je,v as Ie}from"./app-B5nIqswW.js";import{L as Re}from"./loading-button-B8zFhnye.js";import{d as B,c as q,B as fe}from"./button-pjdEQW0R.js";import{D as De,a as _e,b as Ae,c as $e,d as Ne,e as Me,f as Pe,g as Le}from"./dialog-CM4W6zHU.js";import{u as L,R as qe,P as Fe,O as Oe,C as Ke}from"./index-DsZk854g.js";import{P as _}from"./index-CwFfr1ts.js";import{c as ge}from"./createLucideIcon-DvAOrpbu.js";import{P as Be,a as Ve,b as ze}from"./popover-0gtSVBfU.js";import{C as Te}from"./check-Du-Xtxv6.js";/* empty css            */import"./index-ei5H1LFL.js";import"./index-CWPeFHLU.js";import"./index-E7wIswsJ.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]],Ge=ge("ChevronsUpDown",Ue);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],We=ge("Search",He);var pe=1,Je=.9,Xe=.8,Ye=.17,ee=.1,te=.999,Qe=.9999,Ze=.99,et=/[\\\/_+.#"@\[\(\{&]/,tt=/[\\\/_+.#"@\[\(\{&]/g,rt=/[\s-]/,xe=/[\s-]/g;function ne(e,n,r,d,o,s,c){if(s===n.length)return o===e.length?pe:Ze;var p=`${o},${s}`;if(c[p]!==void 0)return c[p];for(var b=d.charAt(s),i=r.indexOf(b,o),v=0,g,E,w,I;i>=0;)g=ne(e,n,r,d,i+1,s+1,c),g>v&&(i===o?g*=pe:et.test(e.charAt(i-1))?(g*=Xe,w=e.slice(o,i-1).match(tt),w&&o>0&&(g*=Math.pow(te,w.length))):rt.test(e.charAt(i-1))?(g*=Je,I=e.slice(o,i-1).match(xe),I&&o>0&&(g*=Math.pow(te,I.length))):(g*=Ye,o>0&&(g*=Math.pow(te,i-o))),e.charAt(i)!==n.charAt(s)&&(g*=Qe)),(g<ee&&r.charAt(i-1)===d.charAt(s+1)||d.charAt(s+1)===d.charAt(s)&&r.charAt(i-1)!==d.charAt(s))&&(E=ne(e,n,r,d,i+1,s+2,c),E*ee>g&&(g=E*ee)),g>v&&(v=g),i=r.indexOf(b,i+1);return c[p]=v,v}function ve(e){return e.toLowerCase().replace(xe," ")}function nt(e,n,r){return e=r&&r.length>0?`${e+" "+r.join(" ")}`:e,ne(e,n,ve(e),ve(n),0,0,{})}var K='[cmdk-group=""]',re='[cmdk-group-items=""]',lt='[cmdk-group-heading=""]',be='[cmdk-item=""]',he=`${be}:not([aria-disabled="true"])`,le="cmdk-item-select",M="data-value",at=(e,n,r)=>nt(e,n,r),ye=l.createContext(void 0),V=()=>l.useContext(ye),we=l.createContext(void 0),ae=()=>l.useContext(we),ke=l.createContext(void 0),Ce=l.forwardRef((e,n)=>{let r=P(()=>{var t,u;return{search:"",value:(u=(t=e.value)!=null?t:e.defaultValue)!=null?u:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),d=P(()=>new Set),o=P(()=>new Map),s=P(()=>new Map),c=P(()=>new Set),p=Ee(e),{label:b,children:i,value:v,onValueChange:g,filter:E,shouldFilter:w,loop:I,disablePointerSelection:k=!1,vimBindings:R=!0,...z}=e,G=L(),oe=L(),H=L(),A=l.useRef(null),y=ht();$(()=>{if(v!==void 0){let t=v.trim();r.current.value=t,S.emit()}},[v]),$(()=>{y(6,se)},[]);let S=l.useMemo(()=>({subscribe:t=>(c.current.add(t),()=>c.current.delete(t)),snapshot:()=>r.current,setState:(t,u,f)=>{var a,h,x,j;if(!Object.is(r.current[t],u)){if(r.current[t]=u,t==="search")Y(),J(),y(1,X);else if(t==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let C=document.getElementById(H);C?C.focus():(a=document.getElementById(G))==null||a.focus()}if(y(7,()=>{var C;r.current.selectedItemId=(C=N())==null?void 0:C.id,S.emit()}),f||y(5,se),((h=p.current)==null?void 0:h.value)!==void 0){let C=u??"";(j=(x=p.current).onValueChange)==null||j.call(x,C);return}}S.emit()}},emit:()=>{c.current.forEach(t=>t())}}),[]),W=l.useMemo(()=>({value:(t,u,f)=>{var a;u!==((a=s.current.get(t))==null?void 0:a.value)&&(s.current.set(t,{value:u,keywords:f}),r.current.filtered.items.set(t,ie(u,f)),y(2,()=>{J(),S.emit()}))},item:(t,u)=>(d.current.add(t),u&&(o.current.has(u)?o.current.get(u).add(t):o.current.set(u,new Set([t]))),y(3,()=>{Y(),J(),r.current.value||X(),S.emit()}),()=>{s.current.delete(t),d.current.delete(t),r.current.filtered.items.delete(t);let f=N();y(4,()=>{Y(),(f==null?void 0:f.getAttribute("id"))===t&&X(),S.emit()})}),group:t=>(o.current.has(t)||o.current.set(t,new Set),()=>{s.current.delete(t),o.current.delete(t)}),filter:()=>p.current.shouldFilter,label:b||e["aria-label"],getDisablePointerSelection:()=>p.current.disablePointerSelection,listId:G,inputId:H,labelId:oe,listInnerRef:A}),[]);function ie(t,u){var f,a;let h=(a=(f=p.current)==null?void 0:f.filter)!=null?a:at;return t?h(t,r.current.search,u):0}function J(){if(!r.current.search||p.current.shouldFilter===!1)return;let t=r.current.filtered.items,u=[];r.current.filtered.groups.forEach(a=>{let h=o.current.get(a),x=0;h.forEach(j=>{let C=t.get(j);x=Math.max(C,x)}),u.push([a,x])});let f=A.current;O().sort((a,h)=>{var x,j;let C=a.getAttribute("id"),T=h.getAttribute("id");return((x=t.get(T))!=null?x:0)-((j=t.get(C))!=null?j:0)}).forEach(a=>{let h=a.closest(re);h?h.appendChild(a.parentElement===h?a:a.closest(`${re} > *`)):f.appendChild(a.parentElement===f?a:a.closest(`${re} > *`))}),u.sort((a,h)=>h[1]-a[1]).forEach(a=>{var h;let x=(h=A.current)==null?void 0:h.querySelector(`${K}[${M}="${encodeURIComponent(a[0])}"]`);x==null||x.parentElement.appendChild(x)})}function X(){let t=O().find(f=>f.getAttribute("aria-disabled")!=="true"),u=t==null?void 0:t.getAttribute(M);S.setState("value",u||void 0)}function Y(){var t,u,f,a;if(!r.current.search||p.current.shouldFilter===!1){r.current.filtered.count=d.current.size;return}r.current.filtered.groups=new Set;let h=0;for(let x of d.current){let j=(u=(t=s.current.get(x))==null?void 0:t.value)!=null?u:"",C=(a=(f=s.current.get(x))==null?void 0:f.keywords)!=null?a:[],T=ie(j,C);r.current.filtered.items.set(x,T),T>0&&h++}for(let[x,j]of o.current)for(let C of j)if(r.current.filtered.items.get(C)>0){r.current.filtered.groups.add(x);break}r.current.filtered.count=h}function se(){var t,u,f;let a=N();a&&(((t=a.parentElement)==null?void 0:t.firstChild)===a&&((f=(u=a.closest(K))==null?void 0:u.querySelector(lt))==null||f.scrollIntoView({block:"nearest"})),a.scrollIntoView({block:"nearest"}))}function N(){var t;return(t=A.current)==null?void 0:t.querySelector(`${be}[aria-selected="true"]`)}function O(){var t;return Array.from(((t=A.current)==null?void 0:t.querySelectorAll(he))||[])}function Q(t){let u=O()[t];u&&S.setState("value",u.getAttribute(M))}function Z(t){var u;let f=N(),a=O(),h=a.findIndex(j=>j===f),x=a[h+t];(u=p.current)!=null&&u.loop&&(x=h+t<0?a[a.length-1]:h+t===a.length?a[0]:a[h+t]),x&&S.setState("value",x.getAttribute(M))}function ue(t){let u=N(),f=u==null?void 0:u.closest(K),a;for(;f&&!a;)f=t>0?pt(f,K):vt(f,K),a=f==null?void 0:f.querySelector(he);a?S.setState("value",a.getAttribute(M)):Z(t)}let ce=()=>Q(O().length-1),de=t=>{t.preventDefault(),t.metaKey?ce():t.altKey?ue(1):Z(1)},me=t=>{t.preventDefault(),t.metaKey?Q(0):t.altKey?ue(-1):Z(-1)};return l.createElement(_.div,{ref:n,tabIndex:-1,...z,"cmdk-root":"",onKeyDown:t=>{var u;(u=z.onKeyDown)==null||u.call(z,t);let f=t.nativeEvent.isComposing||t.keyCode===229;if(!(t.defaultPrevented||f))switch(t.key){case"n":case"j":{R&&t.ctrlKey&&de(t);break}case"ArrowDown":{de(t);break}case"p":case"k":{R&&t.ctrlKey&&me(t);break}case"ArrowUp":{me(t);break}case"Home":{t.preventDefault(),Q(0);break}case"End":{t.preventDefault(),ce();break}case"Enter":{t.preventDefault();let a=N();if(a){let h=new Event(le);a.dispatchEvent(h)}}}}},l.createElement("label",{"cmdk-label":"",htmlFor:W.inputId,id:W.labelId,style:xt},b),U(e,t=>l.createElement(we.Provider,{value:S},l.createElement(ye.Provider,{value:W},t))))}),ot=l.forwardRef((e,n)=>{var r,d;let o=L(),s=l.useRef(null),c=l.useContext(ke),p=V(),b=Ee(e),i=(d=(r=b.current)==null?void 0:r.forceMount)!=null?d:c==null?void 0:c.forceMount;$(()=>{if(!i)return p.item(o,c==null?void 0:c.id)},[i]);let v=Se(o,s,[e.value,e.children,s],e.keywords),g=ae(),E=D(y=>y.value&&y.value===v.current),w=D(y=>i||p.filter()===!1?!0:y.search?y.filtered.items.get(o)>0:!0);l.useEffect(()=>{let y=s.current;if(!(!y||e.disabled))return y.addEventListener(le,I),()=>y.removeEventListener(le,I)},[w,e.onSelect,e.disabled]);function I(){var y,S;k(),(S=(y=b.current).onSelect)==null||S.call(y,v.current)}function k(){g.setState("value",v.current,!0)}if(!w)return null;let{disabled:R,value:z,onSelect:G,forceMount:oe,keywords:H,...A}=e;return l.createElement(_.div,{ref:B(s,n),...A,id:o,"cmdk-item":"",role:"option","aria-disabled":!!R,"aria-selected":!!E,"data-disabled":!!R,"data-selected":!!E,onPointerMove:R||p.getDisablePointerSelection()?void 0:k,onClick:R?void 0:I},e.children)}),it=l.forwardRef((e,n)=>{let{heading:r,children:d,forceMount:o,...s}=e,c=L(),p=l.useRef(null),b=l.useRef(null),i=L(),v=V(),g=D(w=>o||v.filter()===!1?!0:w.search?w.filtered.groups.has(c):!0);$(()=>v.group(c),[]),Se(c,p,[e.value,e.heading,b]);let E=l.useMemo(()=>({id:c,forceMount:o}),[o]);return l.createElement(_.div,{ref:B(p,n),...s,"cmdk-group":"",role:"presentation",hidden:g?void 0:!0},r&&l.createElement("div",{ref:b,"cmdk-group-heading":"","aria-hidden":!0,id:i},r),U(e,w=>l.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":r?i:void 0},l.createElement(ke.Provider,{value:E},w))))}),st=l.forwardRef((e,n)=>{let{alwaysRender:r,...d}=e,o=l.useRef(null),s=D(c=>!c.search);return!r&&!s?null:l.createElement(_.div,{ref:B(o,n),...d,"cmdk-separator":"",role:"separator"})}),ut=l.forwardRef((e,n)=>{let{onValueChange:r,...d}=e,o=e.value!=null,s=ae(),c=D(i=>i.search),p=D(i=>i.selectedItemId),b=V();return l.useEffect(()=>{e.value!=null&&s.setState("search",e.value)},[e.value]),l.createElement(_.input,{ref:n,...d,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":b.listId,"aria-labelledby":b.labelId,"aria-activedescendant":p,id:b.inputId,type:"text",value:o?e.value:c,onChange:i=>{o||s.setState("search",i.target.value),r==null||r(i.target.value)}})}),ct=l.forwardRef((e,n)=>{let{children:r,label:d="Suggestions",...o}=e,s=l.useRef(null),c=l.useRef(null),p=D(i=>i.selectedItemId),b=V();return l.useEffect(()=>{if(c.current&&s.current){let i=c.current,v=s.current,g,E=new ResizeObserver(()=>{g=requestAnimationFrame(()=>{let w=i.offsetHeight;v.style.setProperty("--cmdk-list-height",w.toFixed(1)+"px")})});return E.observe(i),()=>{cancelAnimationFrame(g),E.unobserve(i)}}},[]),l.createElement(_.div,{ref:B(s,n),...o,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":p,"aria-label":d,id:b.listId},U(e,i=>l.createElement("div",{ref:B(c,b.listInnerRef),"cmdk-list-sizer":""},i)))}),dt=l.forwardRef((e,n)=>{let{open:r,onOpenChange:d,overlayClassName:o,contentClassName:s,container:c,...p}=e;return l.createElement(qe,{open:r,onOpenChange:d},l.createElement(Fe,{container:c},l.createElement(Oe,{"cmdk-overlay":"",className:o}),l.createElement(Ke,{"aria-label":e.label,"cmdk-dialog":"",className:s},l.createElement(Ce,{ref:n,...p}))))}),mt=l.forwardRef((e,n)=>D(r=>r.filtered.count===0)?l.createElement(_.div,{ref:n,...e,"cmdk-empty":"",role:"presentation"}):null),ft=l.forwardRef((e,n)=>{let{progress:r,children:d,label:o="Loading...",...s}=e;return l.createElement(_.div,{ref:n,...s,"cmdk-loading":"",role:"progressbar","aria-valuenow":r,"aria-valuemin":0,"aria-valuemax":100,"aria-label":o},U(e,c=>l.createElement("div",{"aria-hidden":!0},c)))}),F=Object.assign(Ce,{List:ct,Item:ot,Input:ut,Group:it,Separator:st,Dialog:dt,Empty:mt,Loading:ft});function pt(e,n){let r=e.nextElementSibling;for(;r;){if(r.matches(n))return r;r=r.nextElementSibling}}function vt(e,n){let r=e.previousElementSibling;for(;r;){if(r.matches(n))return r;r=r.previousElementSibling}}function Ee(e){let n=l.useRef(e);return $(()=>{n.current=e}),n}var $=typeof window>"u"?l.useEffect:l.useLayoutEffect;function P(e){let n=l.useRef();return n.current===void 0&&(n.current=e()),n}function D(e){let n=ae(),r=()=>e(n.snapshot());return l.useSyncExternalStore(n.subscribe,r,r)}function Se(e,n,r,d=[]){let o=l.useRef(),s=V();return $(()=>{var c;let p=(()=>{var i;for(let v of r){if(typeof v=="string")return v.trim();if(typeof v=="object"&&"current"in v)return v.current?(i=v.current.textContent)==null?void 0:i.trim():o.current}})(),b=d.map(i=>i.trim());s.value(e,p,b),(c=n.current)==null||c.setAttribute(M,p),o.current=p}),o}var ht=()=>{let[e,n]=l.useState(),r=P(()=>new Map);return $(()=>{r.current.forEach(d=>d()),r.current=new Map},[e]),(d,o)=>{r.current.set(d,o),n({})}};function gt(e){let n=e.type;return typeof n=="function"?n(e.props):"render"in n?n.render(e.props):e}function U({asChild:e,children:n},r){return e&&l.isValidElement(n)?l.cloneElement(gt(n),{ref:n.ref},r(n.props.children)):r(n)}var xt={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};function bt({className:e,...n}){return m.jsx(F,{"data-slot":"command",className:q("bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md",e),...n})}function yt({className:e,...n}){return m.jsxs("div",{"data-slot":"command-input-wrapper",className:"flex h-9 items-center gap-2 border-b px-3",children:[m.jsx(We,{className:"size-4 shrink-0 opacity-50"}),m.jsx(F.Input,{"data-slot":"command-input",className:q("placeholder:text-muted-foreground flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-hidden disabled:cursor-not-allowed disabled:opacity-50",e),...n})]})}function wt({className:e,...n}){return m.jsx(F.List,{"data-slot":"command-list",className:q("max-h-[300px] scroll-py-1 overflow-x-hidden overflow-y-auto",e),...n})}function kt({...e}){return m.jsx(F.Empty,{"data-slot":"command-empty",className:"py-6 text-center text-sm",...e})}function Ct({className:e,...n}){return m.jsx(F.Group,{"data-slot":"command-group",className:q("text-foreground [&_[cmdk-group-heading]]:text-muted-foreground overflow-hidden p-1 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium",e),...n})}function Et({className:e,...n}){return m.jsx(F.Item,{"data-slot":"command-item",className:q("data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...n})}function Ft({device:e}){const n=je().props.staffs,[r,d]=l.useState(!1),[o,s]=l.useState(!1),{data:c,setData:p,post:b,processing:i,reset:v,clearErrors:g}=Ie({device_id:e.id,member_of_staff_id:""}),E=k=>{k.preventDefault(),b(route("device-staff-mapping.store"),{onSuccess:()=>{v(),w()}})},w=()=>{g(),d(!1),v()},I=n.find(k=>k.id===c.member_of_staff_id);return m.jsxs(De,{open:r,onOpenChange:d,children:[m.jsx(_e,{asChild:!0,children:m.jsx("span",{className:"cursor-pointer text-green-600 hover:text-green-700 hover:underline",children:"Assign"})}),m.jsx(Ae,{className:"sm:max-w-[425px]",children:m.jsxs("form",{onSubmit:E,children:[m.jsxs($e,{children:[m.jsxs(Ne,{children:["Assign Device ",e.type," (",e.brand,")"]}),m.jsx(Me,{children:"Select a member of staff to assign this device to."})]}),m.jsx("div",{className:"my-2 grid gap-4",children:m.jsx("div",{className:"grid gap-3",children:m.jsxs(Be,{open:o,onOpenChange:s,children:[m.jsx(Ve,{asChild:!0,children:m.jsxs(fe,{variant:"outline",role:"combobox","aria-expanded":o,className:"w-full justify-between",children:[I?`${I.first_name} ${I.last_name}`:"Select staff...",m.jsx(Ge,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),m.jsx(ze,{className:"w-full p-0",children:m.jsxs(bt,{children:[m.jsx(yt,{placeholder:"Search staff..."}),m.jsxs(wt,{children:[m.jsx(kt,{children:"No staff found."}),m.jsx(Ct,{children:n.map(k=>{const R=`${k.first_name} ${k.last_name}`;return m.jsxs(Et,{value:`${k.first_name} ${k.last_name}`,onSelect:()=>{p("member_of_staff_id",k.id),s(!1)},children:[m.jsx(Te,{className:q("mr-2 h-4 w-4",c.member_of_staff_id===k.id?"opacity-100":"opacity-0")}),R]},k.id)})})]})]})})]})})}),m.jsxs(Pe,{children:[m.jsx(Le,{asChild:!0,children:m.jsx(fe,{type:"button",variant:"outline",onClick:w,children:"Cancel"})}),m.jsx(Re,{processing:i,text:"Assign",tabIndex:3,fullWidth:!1})]})]})})]})}export{Ft as default};
